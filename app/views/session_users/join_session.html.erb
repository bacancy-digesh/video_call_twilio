<div id="session-details" data-name=<%= @session.unique_room %> data-pas=<%= @session.unique_password%>>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src='https://meet.jit.si/external_api.js'></script>
<script>
$(document).ready(function () {
    const domain = 'meet.jit.si';
var div = document.getElementById('session-details');
var class_name = div.getAttribute("data-name");
var pass = div.getAttribute("data-name");
const options = {
    roomName: class_name,
    width: 1880,
    height: 920,
    configOverwrite: { enableClosePage: true,
                        SHOW_PROMOTIONAL_CLOSE_PAGE: true ,
                        logoImageUrl: '',
                        JITSI_WATERMARK_LINK: ''},
    interfaceConfigOverwrite: {JITSI_WATERMARK_LINK: 'undefine'}
    // parentNode: document.querySelector('#meet')
};
const api = new JitsiMeetExternalAPI(domain, options);
api.addEventListener('participantRoleChanged', function(event) {
    if (event.role === "moderator") {
        api.executeCommand('password', pass);
    }
});
})

// join a protected channel
// api.on('passwordRequired', function ()
// {
//     api.executeCommand('password', pass);
// });
</script>